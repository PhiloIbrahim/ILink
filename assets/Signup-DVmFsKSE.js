import{_ as ae,r as g,Q as S,c as b,o as oe,T as ne,R as le,a as L,d as a,w as o,V as ie,e as ue,u as de,f as ce,H as me,g as _,k as C,m as x,b as r,n as pe,K as ge,L as fe,x as z,M as f,D as U,p as P,i as N,j as i,t as w,U as we,v as q,S as Z,h as he}from"./index-BS4JihMt.js";import{g as V}from"./googleAuthService-C5Ngqyup.js";const ve={class:"auth-page"},ye={class:"form-group"},be={class:"form-group"},Pe={class:"form-group"},Ne={class:"form-group"},Ve={key:0,class:"password-requirements"},ke={class:"form-group"},Ee={class:"form-group terms-group"},Ae={class:"terms-text"},Se={class:"auth-divider"},_e={class:"google-auth-section"},Ce={id:"google-signin-button",class:"google-signin-container"},xe={class:"auth-switch"},ze={class:"switch-text"},qe={__name:"Signup",setup(Te){const k=de(),T=ce(),O=g(null),h=g(!1),v=g(!1),c=g(!1),m=g(!1),E=g(!1),y=g(!1),s=S({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),l=S({firstName:[],lastName:[],email:[],password:[],confirmPassword:[]}),d=S({show:!1,message:"",color:"success"}),B=[e=>!!e||"Name is required",e=>e&&e.length>=2||"Name must be at least 2 characters",e=>/^[a-zA-Z\s]*$/.test(e)||"Name can only contain letters and spaces"],I=[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],R=[e=>!!e||"Password is required",e=>e&&e.length>=8||"Password must be at least 8 characters",e=>/[A-Z]/.test(e)||"Password must contain at least one uppercase letter",e=>/[a-z]/.test(e)||"Password must contain at least one lowercase letter",e=>/[0-9]/.test(e)||"Password must contain at least one number"],$=[e=>!!e||"Please confirm your password",e=>e===s.password||"Passwords do not match"],W=b(()=>s.firstName&&s.lastName&&s.email&&s.password&&s.confirmPassword&&s.password===s.confirmPassword&&/.+@.+\..+/.test(s.email)&&s.password.length>=8&&/[A-Z]/.test(s.password)&&/[a-z]/.test(s.password)&&/[0-9]/.test(s.password)&&c.value),F=b(()=>{if(!s.password)return 0;let e=0;return s.password.length>=8&&e++,/[A-Z]/.test(s.password)&&e++,/[a-z]/.test(s.password)&&e++,/[0-9]/.test(s.password)&&e++,e}),j=b(()=>{const e=F.value;return e===0?"":e===1?"Weak":e===2?"Fair":e===3?"Good":"Strong"});b(()=>{const e=F.value;return e<=1?"error":e===2?"warning":e===3?"info":"success"});const D=()=>(Object.keys(l).forEach(e=>{l[e]=[]}),s.firstName?s.firstName.length<2?l.firstName.push("First name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(s.firstName)||l.firstName.push("First name can only contain letters and spaces"):l.firstName.push("First name is required"),s.lastName?s.lastName.length<2?l.lastName.push("Last name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(s.lastName)||l.lastName.push("Last name can only contain letters and spaces"):l.lastName.push("Last name is required"),s.email?/.+@.+\..+/.test(s.email)||l.email.push("Email must be valid"):l.email.push("Email is required"),s.password?(s.password.length<8&&l.password.push("Password must be at least 8 characters"),/[A-Z]/.test(s.password)||l.password.push("Password must contain at least one uppercase letter"),/[a-z]/.test(s.password)||l.password.push("Password must contain at least one lowercase letter"),/[0-9]/.test(s.password)||l.password.push("Password must contain at least one number")):l.password.push("Password is required"),s.confirmPassword?s.confirmPassword!==s.password&&l.confirmPassword.push("Passwords do not match"):l.confirmPassword.push("Please confirm your password"),Object.values(l).every(e=>e.length===0)),M=()=>{if(!s.firstName)return[];const e=[];return s.firstName.length<2&&e.push("First name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(s.firstName)||e.push("First name can only contain letters and spaces"),e},H=()=>{if(!s.lastName)return[];const e=[];return s.lastName.length<2&&e.push("Last name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(s.lastName)||e.push("Last name can only contain letters and spaces"),e},K=()=>{if(!s.email)return[];const e=[];return/.+@.+\..+/.test(s.email)||e.push("Please enter a valid email address"),e},Q=()=>{if(!s.password)return[];const e=[];return s.password.length<8&&e.push("Password must be at least 8 characters"),/[A-Z]/.test(s.password)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(s.password)||e.push("Password must contain at least one lowercase letter"),/[0-9]/.test(s.password)||e.push("Password must contain at least one number"),e},Y=()=>{if(!s.confirmPassword)return[];const e=[];return s.confirmPassword!==s.password&&e.push("Passwords do not match"),e},J=()=>s.password?`Password strength: ${j.value}`:"Create a strong password with uppercase, lowercase, number and 8+ characters",X=()=>s.confirmPassword?s.confirmPassword===s.password?"Passwords match!":"Passwords do not match":"Re-enter your password to confirm",ee=()=>E.value&&!c.value?["You must agree to the terms and conditions"]:[],se=async()=>{if(E.value=!0,!D()||!c.value){c.value||p("Please agree to the terms and conditions","error");return}m.value=!0;try{const e={email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,phone:"",preferences:{notifications:!0,theme:k.state.theme}};await k.dispatch("signup",e),p("Account created successfully! Welcome to iTag.","success"),setTimeout(()=>{T.push({name:"Profile"})},2e3)}catch(e){console.error("Signup error:",e),p("Signup failed. Please try again.","error")}finally{m.value=!1}},p=(e,t)=>{d.message=e,d.color=t,d.show=!0},A=async e=>{m.value=!0;try{const{userInfo:t}=e.detail,u=V.convertToAppUser(t);await k.dispatch("googleSignup",u),p("Account created successfully with Google! Welcome to iTag.","success"),setTimeout(()=>{T.push({name:"Profile"})},2e3)}catch(t){console.error("Google signup error:",t),p("Google signup failed. Please try again.","error")}finally{m.value=!1}},G=e=>{console.error("Google auth error:",e.detail),p("Google authentication failed. Please try again.","error")},te=async()=>{try{m.value=!0;const e=await V.signInWithPopup();await A({detail:e})}catch(e){console.error("Google popup signup error:",e),p("Google signup was cancelled or failed.","error"),m.value=!1}},re=()=>{const e=document.getElementById("google-signin-button");if(!e)return null;const t=new MutationObserver(u=>{const n=e.querySelector('iframe, div[role="button"]');n&&(n.style.margin="0 auto",y.value=!0)});return t.observe(e,{childList:!0,subtree:!0}),window.googleButtonObserver=t,t};return oe(async()=>{try{await V.init(),window.addEventListener("googleAuthSuccess",A),window.addEventListener("googleAuthError",G);const e=re();await ne();const t=document.getElementById("google-signin-button");if(t)try{await V.renderSignInButton("google-signin-button",{type:"standard",theme:"outline",size:"large",text:"signup_with",shape:"rectangular",width:270,logo_alignment:"center"});const u=t.querySelector('iframe, div[role="button"]');u&&(u.style.margin="0 auto",y.value=!0)}catch(u){console.error("Error rendering Google button:",u),y.value=!1}}catch(e){console.error("Failed to initialize Google Auth:",e)}}),le(()=>{window.removeEventListener("googleAuthSuccess",A),window.removeEventListener("googleAuthError",G),window.googleButtonObserver&&window.googleButtonObserver.disconnect()}),(e,t)=>{const u=me("router-link");return _(),L("div",ve,[a(ie,{class:"auth-container"},{default:o(()=>[a(C,{justify:"center",class:"header-row"},{default:o(()=>[a(x,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[12]||(t[12]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},"it's time to be smart")])],-1)])),_:1,__:[12]})]),_:1}),a(C,{justify:"center",align:"center"},{default:o(()=>[a(x,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:o(()=>[a(pe,{class:"auth-card",elevation:"0"},{default:o(()=>[a(ge,{class:"auth-content"},{default:o(()=>[a(fe,{onSubmit:z(se,["prevent"]),ref_key:"signupForm",ref:O},{default:o(()=>[r("div",ye,[a(f,{modelValue:s.firstName,"onUpdate:modelValue":t[0]||(t[0]=n=>s.firstName=n),label:"First Name",placeholder:"Enter your first name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":M(),rules:B,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",be,[a(f,{modelValue:s.lastName,"onUpdate:modelValue":t[1]||(t[1]=n=>s.lastName=n),label:"Last Name",placeholder:"Enter your last name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":H(),rules:B,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",Pe,[a(f,{modelValue:s.email,"onUpdate:modelValue":t[2]||(t[2]=n=>s.email=n),type:"email",label:"Email Address",placeholder:"Enter your email address",variant:"outlined","prepend-inner-icon":"mdi-email-outline",class:"auth-input","error-messages":K(),rules:I,"validate-on":"blur",hint:"We'll use this to send you important updates","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",Ne,[a(f,{modelValue:s.password,"onUpdate:modelValue":t[3]||(t[3]=n=>s.password=n),type:h.value?"text":"password",label:"Password",placeholder:"Create a strong password",variant:"outlined","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":h.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[4]||(t[4]=n=>h.value=!h.value),class:"auth-input","error-messages":Q(),rules:R,"validate-on":"input",hint:J(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"]),s.password?(_(),L("div",Ve,[r("div",{class:P(["requirement-item",{met:s.password.length>=8}])},[a(N,{size:"small",color:s.password.length>=8?"success":"grey"},{default:o(()=>[i(w(s.password.length>=8?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[13]||(t[13]=r("span",null,"At least 8 characters",-1))],2),r("div",{class:P(["requirement-item",{met:/[A-Z]/.test(s.password)}])},[a(N,{size:"small",color:/[A-Z]/.test(s.password)?"success":"grey"},{default:o(()=>[i(w(/[A-Z]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[14]||(t[14]=r("span",null,"One uppercase letter",-1))],2),r("div",{class:P(["requirement-item",{met:/[a-z]/.test(s.password)}])},[a(N,{size:"small",color:/[a-z]/.test(s.password)?"success":"grey"},{default:o(()=>[i(w(/[a-z]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[15]||(t[15]=r("span",null,"One lowercase letter",-1))],2),r("div",{class:P(["requirement-item",{met:/[0-9]/.test(s.password)}])},[a(N,{size:"small",color:/[0-9]/.test(s.password)?"success":"grey"},{default:o(()=>[i(w(/[0-9]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[16]||(t[16]=r("span",null,"One number",-1))],2)])):U("",!0)]),r("div",ke,[a(f,{modelValue:s.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=n=>s.confirmPassword=n),type:v.value?"text":"password",label:"Confirm Password",placeholder:"Re-enter your password",variant:"outlined","prepend-inner-icon":"mdi-lock-check-outline","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[6]||(t[6]=n=>v.value=!v.value),class:"auth-input","error-messages":Y(),rules:$,"validate-on":"blur",hint:X(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"])]),r("div",Ee,[a(we,{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=n=>c.value=n),color:"primary",class:"terms-checkbox",error:!c.value&&E.value,"error-messages":ee()},{label:o(()=>[r("span",Ae,[t[17]||(t[17]=i(" I agree to the ")),r("a",{href:"#",class:"terms-link",onClick:t[7]||(t[7]=z(()=>{},["prevent"]))},"Terms of Service"),t[18]||(t[18]=i(" and ")),r("a",{href:"#",class:"terms-link",onClick:t[8]||(t[8]=z(()=>{},["prevent"]))},"Privacy Policy")])]),_:1},8,["modelValue","error","error-messages"])]),a(q,{type:"submit",block:"",class:"signup-btn",loading:m.value,disabled:!W.value,size:"large"},{default:o(()=>t[19]||(t[19]=[i(" CREATE ACCOUNT ")])),_:1,__:[19]},8,["loading","disabled"])]),_:1},512)]),_:1})]),_:1}),r("div",Se,[a(Z,{class:"divider-line"}),t[20]||(t[20]=r("span",{class:"divider-text"},"or Sign Up With ",-1)),a(Z,{class:"divider-line"})]),r("div",_e,[r("div",Ce,[y.value?U("",!0):(_(),he(q,{key:0,onClick:te,block:"",variant:"outlined",class:"google-signup-btn",size:"large","prepend-icon":"mdi-google"},{default:o(()=>t[21]||(t[21]=[i(" Sign up with Google ")])),_:1,__:[21]}))])]),r("div",xe,[r("p",ze,[t[23]||(t[23]=i(" Already have an account? ")),a(u,{to:"/login",class:"auth-link"},{default:o(()=>t[22]||(t[22]=[i(" Login ")])),_:1,__:[22]})])])]),_:1})]),_:1}),a(C,{justify:"center",class:"header-row"},{default:o(()=>[a(x,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[24]||(t[24]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},[i(" it's easy to customize your profile."),r("br"),i(" join itag to be smart "),r("span",{class:"highlight"},"NOW!")])])],-1)])),_:1,__:[24]})]),_:1})]),_:1}),a(ue,{modelValue:d.show,"onUpdate:modelValue":t[11]||(t[11]=n=>d.show=n),color:d.color,location:"top",timeout:"4000"},{actions:o(()=>[a(q,{variant:"text",onClick:t[10]||(t[10]=n=>d.show=!1)},{default:o(()=>t[25]||(t[25]=[i(" Close ")])),_:1,__:[25]})]),default:o(()=>[i(w(d.message)+" ",1)]),_:1},8,["modelValue","color"])])}}},Ge=ae(qe,[["__scopeId","data-v-b09d303f"]]);export{Ge as default};
