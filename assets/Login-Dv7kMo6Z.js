import{_ as T,r as p,Q as f,C as E,c as A,o as z,R as I,a as U,d as t,w as l,V as j,e as N,u as D,f as $,H as M,g as R,k as h,m as w,b as r,j as d,n as W,J as q,K as O,L as H,x as J,M as L,v,S,t as K}from"./index-BS4JihMt.js";import{g as y}from"./googleAuthService-C5Ngqyup.js";const Q={class:"auth-page"},X={class:"form-group"},Y={class:"form-group"},Z={class:"forgot-password-container"},ee={class:"auth-divider"},se={class:"auth-switch"},te={class:"switch-text"},oe={__name:"Login",setup(ae){const _=D(),V=$(),C=p(null),m=p(!1),u=p(!1),o=f({email:"",password:""}),a=f({email:[],password:[]});E(()=>o.email,s=>{a.email=[],s?/.+@.+\..+/.test(s)||a.email.push("Please enter a valid email address (e.g., user@example.com)"):a.email.push("Please enter your email address")}),E(()=>o.password,s=>{a.password=[],s?s.length<6&&a.password.push("Password must be at least 6 characters long"):a.password.push("Please enter your password")});const i=f({show:!1,message:"",color:"success"}),G=A(()=>o.email&&o.password&&/.+@.+\..+/.test(o.email)&&o.password.length>=6),B=()=>{const s=x(o.email),e=b(o.password);return s&&e},x=s=>{if(a.email=[],s){if(!/.+@.+\..+/.test(s))return a.email.push("Please enter a valid email address (e.g., user@example.com)"),!1}else return a.email.push("Please enter your email address"),!1;return!0},b=s=>{if(a.password=[],s){if(s.length<6)return a.password.push("Password must be at least 6 characters long"),!1}else return a.password.push("Please enter your password"),!1;return!0},F=async()=>{if(B()){u.value=!0;try{await _.dispatch("login",{email:o.email,password:o.password}),c("Login successful! Welcome back.","success"),setTimeout(()=>{V.push({name:"Profile"})},1500)}catch{c("Login failed. Please check your credentials.","error")}finally{u.value=!1}}},c=(s,e)=>{i.message=s,i.color=e,i.show=!0},k=async s=>{u.value=!0;try{const{userInfo:e}=s.detail,g=y.convertToAppUser(e);await _.dispatch("googleSignup",g),c("Login successful with Google! Welcome back.","success"),setTimeout(()=>{V.push({name:"Profile"})},1500)}catch(e){console.error("Google login error:",e),c("Google login failed. Please try again.","error")}finally{u.value=!1}},P=s=>{console.error("Google auth error:",s.detail),c("Google authentication failed. Please try again.","error")};return z(async()=>{try{await y.init(),window.addEventListener("googleAuthSuccess",k),window.addEventListener("googleAuthError",P),setTimeout(()=>{document.getElementById("google-signin-button-login")&&y.renderSignInButton("google-signin-button-login",{type:"standard",theme:"outline",size:"large",text:"signin_with",shape:"rectangular",width:"100%"})},100)}catch(s){console.error("Failed to initialize Google Auth:",s)}}),I(()=>{window.removeEventListener("googleAuthSuccess",k),window.removeEventListener("googleAuthError",P)}),(s,e)=>{const g=M("router-link");return R(),U("div",Q,[t(j,{class:"auth-container"},{default:l(()=>[t(h,{justify:"center",class:"header-row"},{default:l(()=>[t(w,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:l(()=>e[7]||(e[7]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},[d(" it's easy to customize your profile."),r("br"),d(" join itag to be smart "),r("span",{class:"highlight"},"NOW!")])])],-1)])),_:1,__:[7]})]),_:1}),t(h,{justify:"center",align:"center",class:"form-row"},{default:l(()=>[t(w,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:l(()=>[t(W,{class:"auth-card",elevation:"0"},{default:l(()=>[t(q,{class:"text-center"},{default:l(()=>e[8]||(e[8]=[r("h2",{style:{"font-size":"36px","font-weight":"200"}},"Login",-1)])),_:1,__:[8]}),t(O,{class:"auth-content"},{default:l(()=>[t(H,{onSubmit:J(F,["prevent"]),ref_key:"loginForm",ref:C},{default:l(()=>[r("div",X,[t(L,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=n=>o.email=n),type:"email",placeholder:"E-mail",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":a.email,error:a.email.length>0,"persistent-hint":"",hint:!o.email&&!a.email.length?"Enter your email address":"",onBlur:e[1]||(e[1]=n=>x(o.email)),required:""},null,8,["modelValue","error-messages","error","hint"])]),r("div",Y,[t(L,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=n=>o.password=n),type:m.value?"text":"password",placeholder:"Password",variant:"outlined","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":m.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[3]||(e[3]=n=>m.value=!m.value),class:"auth-input","error-messages":a.password,error:a.password.length>0,"persistent-hint":"",hint:!o.password&&!a.password.length?"Enter your password (minimum 6 characters)":"",onBlur:e[4]||(e[4]=n=>b(o.password)),required:""},null,8,["modelValue","type","append-inner-icon","error-messages","error","hint"])]),t(v,{type:"submit",block:"",class:"login-btn",loading:u.value,disabled:!G.value,size:"large"},{default:l(()=>e[9]||(e[9]=[d(" LOGIN ")])),_:1,__:[9]},8,["loading","disabled"]),r("div",Z,[t(v,{variant:"text",size:"small",class:"forgot-password-link"},{default:l(()=>e[10]||(e[10]=[d(" Forgot password? ")])),_:1,__:[10]})])]),_:1},512),r("div",ee,[t(S,{class:"divider-line"}),e[11]||(e[11]=r("span",{class:"divider-text"},"or",-1)),t(S,{class:"divider-line"})]),e[14]||(e[14]=r("div",{class:"google-auth-section"},[r("div",{id:"google-signin-button-login",class:"google-signin-container"})],-1)),r("div",se,[r("p",te,[e[13]||(e[13]=d(" Don't have an account? ")),t(g,{to:"/signup",class:"auth-link"},{default:l(()=>e[12]||(e[12]=[d(" Sign up here ")])),_:1,__:[12]})])])]),_:1,__:[14]})]),_:1})]),_:1})]),_:1}),t(h,{justify:"center",class:"header-row"},{default:l(()=>[t(w,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:l(()=>e[15]||(e[15]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"}," it's time to be smart ")])],-1)])),_:1,__:[15]})]),_:1})]),_:1}),t(N,{modelValue:i.show,"onUpdate:modelValue":e[6]||(e[6]=n=>i.show=n),color:i.color,location:"top",timeout:"4000"},{actions:l(()=>[t(v,{variant:"text",onClick:e[5]||(e[5]=n=>i.show=!1)},{default:l(()=>e[16]||(e[16]=[d(" Close ")])),_:1,__:[16]})]),default:l(()=>[d(K(i.message)+" ",1)]),_:1},8,["modelValue","color"])])}}},ne=T(oe,[["__scopeId","data-v-80fcad10"]]);export{ne as default};
