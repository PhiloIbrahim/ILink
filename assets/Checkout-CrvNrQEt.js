import{_ as ee,r as v,D as x,c as f,u as se,o as te,g as ae,a as g,d as s,w as t,V as le,e as oe,f as re,h as p,G as C,H as _,b as a,i as r,s as q,I as F,M as ie,N as de,O as D,P as T,n as R,J as ne,K as ue,C as y,l as h,p as c,Q as U,F as A,q as E,m as L,R as B,S as M,t as i,T as Y,A as j,x as H,U as me,W as pe}from"./index-B_OohRgW.js";const ce={class:"checkout-page"},fe={key:0,class:"step-content"},ve={class:"form-group"},ge={class:"form-group"},_e={class:"form-group"},ye={class:"form-group"},he={class:"form-group"},Ve={class:"step-actions"},ke={key:1,class:"step-content"},we={class:"review-section"},be={class:"item-total"},Ne={class:"review-section"},Se={class:"review-info"},xe={class:"review-text"},Ce={class:"review-section"},qe={class:"review-info"},Fe={class:"payment-info"},Te={class:"step-actions"},Oe={class:"summary-item-price"},ze={class:"price-breakdown"},$e={class:"price-row"},Ie={class:"price-row"},Pe={class:"price-row"},De={class:"price-row total-row"},Re={class:"total-amount"},Ue={class:"security-info"},Ae={class:"success-header"},Ee={class:"success-subtitle"},Le={__name:"Checkout",setup(Be){const N=se(),O=ae(),u=v(1),V=v(!1),k=v(!1),z=v(""),Q=v(null),l=x({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""}),n=x({firstName:[],lastName:[],email:[],phone:[],address:[],city:[],state:[],zipCode:[]}),m=x({show:!1,message:"",color:"success"}),w=f(()=>N.state.cart),b=f(()=>N.getters.cartTotal),S=f(()=>b.value>100?0:9.99),$=f(()=>b.value*.08),W=f(()=>b.value+S.value+$.value),I=/^01[0125][0-9]{8}$/;f(()=>l.firstName&&l.lastName&&l.email&&/.+@.+\..+/.test(l.email)&&l.phone&&I.test(l.phone)&&l.address);const G=()=>{Object.keys(n).forEach(e=>{["firstName","lastName","email","phone","address"].includes(e)&&(n[e]=[])});let d=!0;return l.firstName||(n.firstName.push("First name is required"),d=!1),l.lastName||(n.lastName.push("Last name is required"),d=!1),l.email?/.+@.+\..+/.test(l.email)||(n.email.push("Please enter a valid email"),d=!1):(n.email.push("Email is required"),d=!1),l.phone?I.test(l.phone)||(n.phone.push("Enter a valid Egyptian phone number"),d=!1):(n.phone.push("Phone number is required"),d=!1),l.address||(n.address.push("Address is required"),d=!1),d},J=()=>{u.value===1&&G()&&(u.value=2)},K=()=>{u.value>1&&u.value--},X=async()=>{V.value=!0;try{await new Promise(d=>setTimeout(d,2e3)),z.value="ORD-"+Date.now().toString().slice(-6),w.value.forEach(d=>{N.dispatch("removeFromCart",d.id)}),k.value=!0}catch{P("Order failed. Please try again.","error")}finally{V.value=!1}},Z=()=>{k.value=!1,O.push("/")},P=(d,e)=>{m.message=d,m.color=e,m.show=!0};return te(()=>{w.value.length===0&&(P("Your cart is empty. Redirecting to products...","warning"),setTimeout(()=>{O.push("/products")},2e3))}),(d,e)=>(p(),g("div",ce,[s(le,{class:"checkout-container"},{default:t(()=>[s(C,{justify:"center",class:"mb-6"},{default:t(()=>[s(_,{cols:"12"},{default:t(()=>e[9]||(e[9]=[a("div",{class:"checkout-header"},[a("h1",{class:"header-title"},[r(" complete your order to get"),a("br"),r(" your iTag products "),a("span",{class:"highlight"},"NOW!")])],-1)])),_:1,__:[9]})]),_:1}),s(C,{justify:"center"},{default:t(()=>[s(_,{cols:"12",lg:"8",xl:"7"},{default:t(()=>[s(q,{class:"checkout-form-card",elevation:"0"},{default:t(()=>[s(F,{class:"pb-0"},{default:t(()=>[s(ie,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),class:"checkout-stepper",elevation:"0","hide-actions":""},{default:t(()=>[s(de,null,{default:t(()=>[s(D,{complete:u.value>1,color:u.value>=1?"primary":"grey",title:"Shipping Info",value:"1"},null,8,["complete","color"]),s(T),s(D,{complete:u.value>2,color:u.value>=2?"primary":"grey",title:"Review Order",value:"2"},null,8,["complete","color"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(F,{class:"checkout-content"},{default:t(()=>[u.value===1?(p(),g("div",fe,[e[12]||(e[12]=a("h2",{class:"step-title"},"Shipping Information",-1)),s(ne,{onSubmit:ue(J,["prevent"]),ref_key:"shippingForm",ref:Q},{default:t(()=>[s(C,null,{default:t(()=>[s(_,{cols:"12",md:"6"},{default:t(()=>[a("div",ve,[s(y,{modelValue:l.firstName,"onUpdate:modelValue":e[1]||(e[1]=o=>l.firstName=o),placeholder:"First Name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"checkout-input","error-messages":n.firstName,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])])]),_:1}),s(_,{cols:"12",md:"6"},{default:t(()=>[a("div",ge,[s(y,{modelValue:l.lastName,"onUpdate:modelValue":e[2]||(e[2]=o=>l.lastName=o),placeholder:"Last Name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"checkout-input","error-messages":n.lastName,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])])]),_:1})]),_:1}),a("div",_e,[s(y,{modelValue:l.email,"onUpdate:modelValue":e[3]||(e[3]=o=>l.email=o),type:"email",placeholder:"Email Address",variant:"outlined","prepend-inner-icon":"mdi-email-outline",class:"checkout-input","error-messages":n.email,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",ye,[s(y,{modelValue:l.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>l.phone=o),placeholder:"Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone-outline",class:"checkout-input","error-messages":n.phone,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",he,[s(y,{modelValue:l.address,"onUpdate:modelValue":e[5]||(e[5]=o=>l.address=o),placeholder:"Address",variant:"outlined","prepend-inner-icon":"mdi-map-marker-outline",class:"checkout-input","error-messages":n.address,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",Ve,[s(h,{type:"submit",class:"checkout-btn primary-btn",size:"large",loading:V.value},{default:t(()=>[e[11]||(e[11]=r(" Review Order ")),s(c,{right:""},{default:t(()=>e[10]||(e[10]=[r("mdi-arrow-right")])),_:1,__:[10]})]),_:1,__:[11]},8,["loading"])])]),_:1},512)])):R("",!0),u.value===2?(p(),g("div",ke,[e[26]||(e[26]=a("h2",{class:"step-title"},"Review Your Order",-1)),a("div",we,[e[13]||(e[13]=a("h3",{class:"review-section-title"},"Order Summary",-1)),s(U,{class:"order-items"},{default:t(()=>[(p(!0),g(A,null,E(w.value,o=>(p(),L(B,{key:o.id,class:"order-item"},{prepend:t(()=>[s(j,{size:"60",rounded:"lg"},{default:t(()=>[s(H,{src:`https://picsum.photos/60/60?random=${o.id}`},null,8,["src"])]),_:2},1024)]),append:t(()=>[a("div",be," $"+i((o.price*o.quantity).toFixed(2)),1)]),default:t(()=>[s(M,{class:"item-name"},{default:t(()=>[r(i(o.name),1)]),_:2},1024),s(Y,{class:"item-details"},{default:t(()=>[r(" Quantity: "+i(o.quantity)+" Ã— $"+i(o.price),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a("div",Ne,[e[17]||(e[17]=a("h3",{class:"review-section-title"},"Shipping Address",-1)),a("div",Se,[a("p",xe,[r(i(l.firstName)+" "+i(l.lastName),1),e[14]||(e[14]=a("br",null,null,-1)),r(" "+i(l.address),1),e[15]||(e[15]=a("br",null,null,-1)),r(" "+i(l.city)+", "+i(l.state)+" "+i(l.zipCode),1),e[16]||(e[16]=a("br",null,null,-1)),r(" "+i(l.phone),1)])])]),a("div",Ce,[e[21]||(e[21]=a("h3",{class:"review-section-title"},"Payment Method",-1)),a("div",qe,[a("div",Fe,[s(c,{left:"",color:"success"},{default:t(()=>e[18]||(e[18]=[r("mdi-cash")])),_:1,__:[18]}),e[19]||(e[19]=a("span",{class:"card-info"}," Cash on Delivery (COD) ",-1))]),e[20]||(e[20]=a("p",{class:"cod-description"}," You will pay when your order is delivered to your address. ",-1))])]),a("div",Te,[s(h,{variant:"outlined",class:"checkout-btn secondary-btn",size:"large",onClick:K},{default:t(()=>[s(c,{left:""},{default:t(()=>e[22]||(e[22]=[r("mdi-arrow-left")])),_:1,__:[22]}),e[23]||(e[23]=r(" Back "))]),_:1,__:[23]}),s(h,{class:"checkout-btn primary-btn",size:"large",loading:V.value,onClick:X},{default:t(()=>[s(c,{left:""},{default:t(()=>e[24]||(e[24]=[r("mdi-check")])),_:1,__:[24]}),e[25]||(e[25]=r(" Place Order "))]),_:1,__:[25]},8,["loading"])])])):R("",!0)]),_:1})]),_:1})]),_:1}),s(_,{cols:"12",lg:"4",xl:"4"},{default:t(()=>[s(q,{class:"order-summary-card",elevation:"0"},{default:t(()=>[s(me,{class:"summary-header"},{default:t(()=>[s(c,{left:""},{default:t(()=>e[27]||(e[27]=[r("mdi-receipt")])),_:1,__:[27]}),e[28]||(e[28]=r(" Order Summary "))]),_:1,__:[28]}),s(F,{class:"summary-content"},{default:t(()=>[s(U,{class:"summary-items"},{default:t(()=>[(p(!0),g(A,null,E(w.value,o=>(p(),L(B,{key:o.id,class:"summary-item"},{prepend:t(()=>[s(j,{size:"40",rounded:"lg"},{default:t(()=>[s(H,{src:`https://picsum.photos/40/40?random=${o.id}`},null,8,["src"])]),_:2},1024)]),append:t(()=>[a("div",Oe," $"+i((o.price*o.quantity).toFixed(2)),1)]),default:t(()=>[s(M,{class:"summary-item-name"},{default:t(()=>[r(i(o.name),1)]),_:2},1024),s(Y,{class:"summary-item-qty"},{default:t(()=>[r(" Qty: "+i(o.quantity),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(T,{class:"my-4"}),a("div",ze,[a("div",$e,[e[29]||(e[29]=a("span",null,"Subtotal:",-1)),a("span",null,"$"+i(b.value.toFixed(2)),1)]),a("div",Ie,[e[30]||(e[30]=a("span",null,"Shipping:",-1)),a("span",null,i(S.value===0?"Free":"$"+S.value.toFixed(2)),1)]),a("div",Pe,[e[31]||(e[31]=a("span",null,"Tax:",-1)),a("span",null,"$"+i($.value.toFixed(2)),1)]),s(T,{class:"my-2"}),a("div",De,[e[32]||(e[32]=a("span",{class:"total-label"},"Total:",-1)),a("span",Re,"$"+i(W.value.toFixed(2)),1)])]),a("div",Ue,[s(c,{left:"",color:"success",size:"small"},{default:t(()=>e[33]||(e[33]=[r("mdi-truck-delivery")])),_:1,__:[33]}),e[34]||(e[34]=a("span",{class:"security-text"},"Safe and secure cash on delivery",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(oe,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),persistent:"","max-width":"500"},{default:t(()=>[s(q,{class:"success-dialog"},{default:t(()=>[a("div",Ae,[s(c,{size:"64",color:"success"},{default:t(()=>e[35]||(e[35]=[r("mdi-check-circle")])),_:1,__:[35]}),e[36]||(e[36]=a("h2",{class:"success-title"},"Order Placed Successfully!",-1)),a("p",Ee," Thank you for your purchase. Your order #"+i(z.value)+" is being processed. ",1)]),s(pe,{class:"success-actions"},{default:t(()=>[s(h,{color:"primary",variant:"flat",onClick:Z,block:"",size:"large"},{default:t(()=>e[37]||(e[37]=[r(" Continue Shopping ")])),_:1,__:[37]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(re,{modelValue:m.show,"onUpdate:modelValue":e[8]||(e[8]=o=>m.show=o),color:m.color,location:"top",timeout:"4000"},{actions:t(()=>[s(h,{variant:"text",onClick:e[7]||(e[7]=o=>m.show=!1)},{default:t(()=>e[38]||(e[38]=[r(" Close ")])),_:1,__:[38]})]),default:t(()=>[r(i(m.message)+" ",1)]),_:1},8,["modelValue","color"])]))}},Ye=ee(Le,[["__scopeId","data-v-f3c82cb5"]]);export{Ye as default};
