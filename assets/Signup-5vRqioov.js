import{_ as ae,r as g,Q as x,c as P,o as oe,R as ne,S as le,a as V,d as a,w as o,V as ie,e as ue,u as de,f as ce,H as me,g as f,k as z,m as q,b as r,v as C,D as N,n as pe,K as ge,L as fe,x as B,M as w,p as k,i as L,j as i,t as h,U as we,T as U,h as he}from"./index-Bsa1Ezn7.js";import{g as E}from"./googleAuthService-C5Ngqyup.js";const ve={class:"auth-page"},ye={class:"ilink-signup-btn-container"},be={key:0,width:"23",height:"31",viewBox:"0 0 23 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pe={key:1,width:"22",height:"31",viewBox:"0 0 22 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ve={class:"form-group"},Ce={class:"form-group"},Ne={class:"form-group"},ke={class:"form-group"},Le={key:0,class:"password-requirements"},Ee={class:"form-group"},Ae={class:"form-group terms-group"},Se={class:"terms-text"},_e={class:"auth-divider"},xe={class:"google-auth-section"},ze={id:"google-signin-button",class:"google-signin-container"},qe={class:"auth-switch"},Be={class:"switch-text"},Te={__name:"Signup",setup(Ze){const A=de(),T=ce(),O=g(null),v=g(!1),y=g(!1),c=g(!1),m=g(!1),S=g(!1),b=g(!1),s=x({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),l=x({firstName:[],lastName:[],email:[],password:[],confirmPassword:[]}),d=x({show:!1,message:"",color:"success"}),Z=[e=>!!e||"Name is required",e=>e&&e.length>=2||"Name must be at least 2 characters",e=>/^[a-zA-Z\s]*$/.test(e)||"Name can only contain letters and spaces"],$=[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],I=[e=>!!e||"Password is required",e=>e&&e.length>=8||"Password must be at least 8 characters",e=>/[A-Z]/.test(e)||"Password must contain at least one uppercase letter",e=>/[a-z]/.test(e)||"Password must contain at least one lowercase letter",e=>/[0-9]/.test(e)||"Password must contain at least one number"],R=[e=>!!e||"Please confirm your password",e=>e===s.password||"Passwords do not match"],M=P(()=>s.firstName&&s.lastName&&s.email&&s.password&&s.confirmPassword&&s.password===s.confirmPassword&&/.+@.+\..+/.test(s.email)&&s.password.length>=8&&/[A-Z]/.test(s.password)&&/[a-z]/.test(s.password)&&/[0-9]/.test(s.password)&&c.value),F=P(()=>{if(!s.password)return 0;let e=0;return s.password.length>=8&&e++,/[A-Z]/.test(s.password)&&e++,/[a-z]/.test(s.password)&&e++,/[0-9]/.test(s.password)&&e++,e}),W=P(()=>{const e=F.value;return e===0?"":e===1?"Weak":e===2?"Fair":e===3?"Good":"Strong"});P(()=>{const e=F.value;return e<=1?"error":e===2?"warning":e===3?"info":"success"});const j=()=>(Object.keys(l).forEach(e=>{l[e]=[]}),s.firstName?s.firstName.length<2?l.firstName.push("First name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(s.firstName)||l.firstName.push("First name can only contain letters and spaces"):l.firstName.push("First name is required"),s.lastName?s.lastName.length<2?l.lastName.push("Last name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(s.lastName)||l.lastName.push("Last name can only contain letters and spaces"):l.lastName.push("Last name is required"),s.email?/.+@.+\..+/.test(s.email)||l.email.push("Email must be valid"):l.email.push("Email is required"),s.password?(s.password.length<8&&l.password.push("Password must be at least 8 characters"),/[A-Z]/.test(s.password)||l.password.push("Password must contain at least one uppercase letter"),/[a-z]/.test(s.password)||l.password.push("Password must contain at least one lowercase letter"),/[0-9]/.test(s.password)||l.password.push("Password must contain at least one number")):l.password.push("Password is required"),s.confirmPassword?s.confirmPassword!==s.password&&l.confirmPassword.push("Passwords do not match"):l.confirmPassword.push("Please confirm your password"),Object.values(l).every(e=>e.length===0)),H=()=>{if(!s.firstName)return[];const e=[];return s.firstName.length<2&&e.push("First name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(s.firstName)||e.push("First name can only contain letters and spaces"),e},D=()=>{if(!s.lastName)return[];const e=[];return s.lastName.length<2&&e.push("Last name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(s.lastName)||e.push("Last name can only contain letters and spaces"),e},K=()=>{if(!s.email)return[];const e=[];return/.+@.+\..+/.test(s.email)||e.push("Please enter a valid email address"),e},Q=()=>{if(!s.password)return[];const e=[];return s.password.length<8&&e.push("Password must be at least 8 characters"),/[A-Z]/.test(s.password)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(s.password)||e.push("Password must contain at least one lowercase letter"),/[0-9]/.test(s.password)||e.push("Password must contain at least one number"),e},Y=()=>{if(!s.confirmPassword)return[];const e=[];return s.confirmPassword!==s.password&&e.push("Passwords do not match"),e},J=()=>s.password?`Password strength: ${W.value}`:"Create a strong password with uppercase, lowercase, number and 8+ characters",X=()=>s.confirmPassword?s.confirmPassword===s.password?"Passwords match!":"Passwords do not match":"Re-enter your password to confirm",ee=()=>S.value&&!c.value?["You must agree to the terms and conditions"]:[],se=async()=>{if(S.value=!0,!j()||!c.value){c.value||p("Please agree to the terms and conditions","error");return}m.value=!0;try{const e={email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,phone:"",preferences:{notifications:!0,theme:A.state.theme}};await A.dispatch("signup",e),p("Account created successfully! Welcome to iTag.","success"),setTimeout(()=>{T.push({name:"Profile"})},2e3)}catch(e){console.error("Signup error:",e),p("Signup failed. Please try again.","error")}finally{m.value=!1}},p=(e,t)=>{d.message=e,d.color=t,d.show=!0},_=async e=>{m.value=!0;try{const{userInfo:t}=e.detail,u=E.convertToAppUser(t);await A.dispatch("googleSignup",u),p("Account created successfully with Google! Welcome to iTag.","success"),setTimeout(()=>{T.push({name:"Profile"})},2e3)}catch(t){console.error("Google signup error:",t),p("Google signup failed. Please try again.","error")}finally{m.value=!1}},G=e=>{console.error("Google auth error:",e.detail),p("Google authentication failed. Please try again.","error")},te=async()=>{try{m.value=!0;const e=await E.signInWithPopup();await _({detail:e})}catch(e){console.error("Google popup signup error:",e),p("Google signup was cancelled or failed.","error"),m.value=!1}},re=()=>{const e=document.getElementById("google-signin-button");if(!e)return null;const t=new MutationObserver(u=>{const n=e.querySelector('iframe, div[role="button"]');n&&(n.style.margin="0 auto",b.value=!0)});return t.observe(e,{childList:!0,subtree:!0}),window.googleButtonObserver=t,t};return oe(async()=>{try{await E.init(),window.addEventListener("googleAuthSuccess",_),window.addEventListener("googleAuthError",G);const e=re();await ne();const t=document.getElementById("google-signin-button");if(t)try{await E.renderSignInButton("google-signin-button",{type:"standard",theme:"outline",size:"large",text:"signup_with",shape:"rectangular",width:270,logo_alignment:"center"});const u=t.querySelector('iframe, div[role="button"]');u&&(u.style.margin="0 auto",b.value=!0)}catch(u){console.error("Error rendering Google button:",u),b.value=!1}}catch(e){console.error("Failed to initialize Google Auth:",e)}}),le(()=>{window.removeEventListener("googleAuthSuccess",_),window.removeEventListener("googleAuthError",G),window.googleButtonObserver&&window.googleButtonObserver.disconnect()}),(e,t)=>{const u=me("router-link");return f(),V("div",ve,[a(ie,{class:"auth-container"},{default:o(()=>[a(z,{justify:"center",class:"header-row"},{default:o(()=>[a(q,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[12]||(t[12]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},"it's time to be smart")])],-1)])),_:1,__:[12]})]),_:1}),a(z,{justify:"center",align:"center"},{default:o(()=>[a(q,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:o(()=>[r("div",ye,[a(C,{class:"ilink-signup-btn",rounded:"lg",block:""},{default:o(()=>[e.$store.state.theme==="light"?(f(),V("svg",be,t[13]||(t[13]=[r("path",{d:"M18.1401 3.60001H21.44C21.77 3.60001 22.0401 3.87002 22.0401 4.20002V23.52C22.0401 24.04 21.42 24.32 21.03 23.96L13.62 17.19L5.20004 9.50001L0.90004 5.57001C0.78004 5.46001 0.700043 5.29001 0.700043 5.13001V1.34C0.700043 0.820003 1.32005 0.540001 1.71005 0.900001L17.55 15.37V4.22001C17.55 3.89001 17.82 3.62 18.15 3.62L18.1401 3.60001ZM5.04004 27.25V16.1L20.8801 30.57C21.2701 30.92 21.8901 30.65 21.8901 30.13V26.34C21.8901 26.17 21.82 26.01 21.69 25.9L17.3901 21.97L8.97005 14.28L1.56004 7.51002C1.17004 7.16002 0.550049 7.43002 0.550049 7.95002V27.27C0.550049 27.6 0.82004 27.87 1.15004 27.87H4.45004C4.78004 27.87 5.05005 27.6 5.05005 27.27L5.04004 27.25Z",fill:"white"},null,-1)]))):N("",!0),e.$store.state.theme==="dark"?(f(),V("svg",Pe,t[14]||(t[14]=[r("path",{d:"M17.91 3.60001H21.21C21.54 3.60001 21.8101 3.87002 21.8101 4.20002V23.52C21.8101 24.04 21.19 24.32 20.8 23.96L13.39 17.19L4.96997 9.50001L0.670044 5.57001C0.550044 5.46001 0.469971 5.29001 0.469971 5.13001V1.34C0.469971 0.820003 1.08998 0.540001 1.47998 0.900001L17.3199 15.37V4.22001C17.3199 3.89001 17.59 3.62 17.92 3.62L17.91 3.60001ZM4.81006 27.25V16.1L20.65 30.57C21.04 30.92 21.66 30.65 21.66 30.13V26.34C21.66 26.17 21.59 26.01 21.46 25.9L17.16 21.97L8.73999 14.28L1.32996 7.51002C0.939956 7.16002 0.319946 7.43002 0.319946 7.95002V27.27C0.319946 27.6 0.590044 27.87 0.920044 27.87H4.21997C4.54997 27.87 4.81995 27.6 4.81995 27.27L4.81006 27.25Z",fill:"black"},null,-1)]))):N("",!0),t[15]||(t[15]=r("span",{class:"ml-3"}," Sign Up with iLink ",-1))]),_:1,__:[15]})]),a(pe,{class:"auth-card",elevation:"0"},{default:o(()=>[a(ge,{class:"auth-content"},{default:o(()=>[a(fe,{onSubmit:B(se,["prevent"]),ref_key:"signupForm",ref:O},{default:o(()=>[r("div",Ve,[a(w,{modelValue:s.firstName,"onUpdate:modelValue":t[0]||(t[0]=n=>s.firstName=n),label:"First Name",placeholder:"Enter your first name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":H(),rules:Z,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",Ce,[a(w,{modelValue:s.lastName,"onUpdate:modelValue":t[1]||(t[1]=n=>s.lastName=n),label:"Last Name",placeholder:"Enter your last name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":D(),rules:Z,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",Ne,[a(w,{modelValue:s.email,"onUpdate:modelValue":t[2]||(t[2]=n=>s.email=n),type:"email",label:"Email Address",placeholder:"Enter your email address",variant:"outlined","prepend-inner-icon":"mdi-email-outline",class:"auth-input","error-messages":K(),rules:$,"validate-on":"blur",hint:"We'll use this to send you important updates","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",ke,[a(w,{modelValue:s.password,"onUpdate:modelValue":t[3]||(t[3]=n=>s.password=n),type:v.value?"text":"password",label:"Password",placeholder:"Create a strong password",variant:"outlined","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[4]||(t[4]=n=>v.value=!v.value),class:"auth-input","error-messages":Q(),rules:I,"validate-on":"input",hint:J(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"]),s.password?(f(),V("div",Le,[r("div",{class:k(["requirement-item",{met:s.password.length>=8}])},[a(L,{size:"small",color:s.password.length>=8?"success":"grey"},{default:o(()=>[i(h(s.password.length>=8?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[16]||(t[16]=r("span",null,"At least 8 characters",-1))],2),r("div",{class:k(["requirement-item",{met:/[A-Z]/.test(s.password)}])},[a(L,{size:"small",color:/[A-Z]/.test(s.password)?"success":"grey"},{default:o(()=>[i(h(/[A-Z]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[17]||(t[17]=r("span",null,"One uppercase letter",-1))],2),r("div",{class:k(["requirement-item",{met:/[a-z]/.test(s.password)}])},[a(L,{size:"small",color:/[a-z]/.test(s.password)?"success":"grey"},{default:o(()=>[i(h(/[a-z]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[18]||(t[18]=r("span",null,"One lowercase letter",-1))],2),r("div",{class:k(["requirement-item",{met:/[0-9]/.test(s.password)}])},[a(L,{size:"small",color:/[0-9]/.test(s.password)?"success":"grey"},{default:o(()=>[i(h(/[0-9]/.test(s.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[19]||(t[19]=r("span",null,"One number",-1))],2)])):N("",!0)]),r("div",Ee,[a(w,{modelValue:s.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=n=>s.confirmPassword=n),type:y.value?"text":"password",label:"Confirm Password",placeholder:"Re-enter your password",variant:"outlined","prepend-inner-icon":"mdi-lock-check-outline","append-inner-icon":y.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[6]||(t[6]=n=>y.value=!y.value),class:"auth-input","error-messages":Y(),rules:R,"validate-on":"blur",hint:X(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"])]),r("div",Ae,[a(we,{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=n=>c.value=n),color:"primary",class:"terms-checkbox",error:!c.value&&S.value,"error-messages":ee()},{label:o(()=>[r("span",Se,[t[20]||(t[20]=i(" I agree to the ")),r("a",{href:"#",class:"terms-link",onClick:t[7]||(t[7]=B(()=>{},["prevent"]))},"Terms of Service"),t[21]||(t[21]=i(" and ")),r("a",{href:"#",class:"terms-link",onClick:t[8]||(t[8]=B(()=>{},["prevent"]))},"Privacy Policy")])]),_:1},8,["modelValue","error","error-messages"])]),a(C,{type:"submit",block:"",class:"signup-btn",loading:m.value,disabled:!M.value,size:"large"},{default:o(()=>t[22]||(t[22]=[i(" CREATE ACCOUNT ")])),_:1,__:[22]},8,["loading","disabled"])]),_:1},512)]),_:1})]),_:1}),r("div",_e,[a(U,{class:"divider-line"}),t[23]||(t[23]=r("span",{class:"divider-text"},"or Sign Up With ",-1)),a(U,{class:"divider-line"})]),r("div",xe,[r("div",ze,[b.value?N("",!0):(f(),he(C,{key:0,onClick:te,block:"",variant:"outlined",class:"google-signup-btn",size:"large","prepend-icon":"mdi-google"},{default:o(()=>t[24]||(t[24]=[i(" Sign up with Google ")])),_:1,__:[24]}))])]),r("div",qe,[r("p",Be,[t[26]||(t[26]=i(" Already have an account? ")),a(u,{to:"/login",class:"auth-link"},{default:o(()=>t[25]||(t[25]=[i(" Login ")])),_:1,__:[25]})])])]),_:1})]),_:1}),a(z,{justify:"center",class:"header-row"},{default:o(()=>[a(q,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[27]||(t[27]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},[i(" it's easy to customize your profile."),r("br"),i(" join itag to be smart "),r("span",{class:"highlight"},"NOW!")])])],-1)])),_:1,__:[27]})]),_:1})]),_:1}),a(ue,{modelValue:d.show,"onUpdate:modelValue":t[11]||(t[11]=n=>d.show=n),color:d.color,location:"top",timeout:"4000"},{actions:o(()=>[a(C,{variant:"text",onClick:t[10]||(t[10]=n=>d.show=!1)},{default:o(()=>t[28]||(t[28]=[i(" Close ")])),_:1,__:[28]})]),default:o(()=>[i(h(d.message)+" ",1)]),_:1},8,["modelValue","color"])])}}},Ue=ae(Te,[["__scopeId","data-v-4f0cc1c3"]]);export{Ue as default};
