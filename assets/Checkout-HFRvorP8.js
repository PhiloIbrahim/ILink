import{_ as ee,r as v,R as C,c as f,u as se,o as te,f as ae,a as g,d as s,w as t,V as le,C as oe,e as re,g as p,k as x,m as y,b as a,j as r,p as ie,n as q,K as F,Y as de,Z as ne,$ as I,X as T,z as R,L as ue,x as me,N as _,v as h,i as c,a0 as L,F as U,l as A,h as E,a1 as B,a2 as Y,t as i,a3 as j,a4 as M,q as H,J as pe,P as ce}from"./index-Bx-6uyVj.js";const fe={class:"checkout-page"},ve={key:0,class:"step-content"},ge={class:"form-group"},ye={class:"form-group"},_e={class:"form-group"},he={class:"form-group"},Ve={class:"form-group"},ke={class:"step-actions"},we={key:1,class:"step-content"},be={class:"review-section"},Ne={class:"item-total"},Se={class:"review-section"},Ce={class:"review-info"},xe={class:"review-text"},qe={class:"review-section"},Fe={class:"review-info"},Te={class:"payment-info"},ze={class:"step-actions"},Oe={class:"summary-item-price"},$e={class:"price-breakdown"},Pe={class:"price-row"},De={class:"price-row"},Ie={class:"price-row"},Re={class:"price-row total-row"},Le={class:"total-amount"},Ue={class:"security-info"},Ae={class:"success-header"},Ee={class:"success-subtitle"},Be={__name:"Checkout",setup(Ye){const N=se(),z=ae(),u=v(1),V=v(!1),k=v(!1),O=v(""),Q=v(null),l=C({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""}),n=C({firstName:[],lastName:[],email:[],phone:[],address:[],city:[],state:[],zipCode:[]}),m=C({show:!1,message:"",color:"success"}),w=f(()=>N.state.cart),b=f(()=>N.getters.cartTotal),S=f(()=>b.value>100?0:9.99),$=f(()=>b.value*.08),J=f(()=>b.value+S.value+$.value),P=/^01[0125][0-9]{8}$/;f(()=>l.firstName&&l.lastName&&l.email&&/.+@.+\..+/.test(l.email)&&l.phone&&P.test(l.phone)&&l.address);const K=()=>{Object.keys(n).forEach(e=>{["firstName","lastName","email","phone","address"].includes(e)&&(n[e]=[])});let d=!0;return l.firstName||(n.firstName.push("First name is required"),d=!1),l.lastName||(n.lastName.push("Last name is required"),d=!1),l.email?/.+@.+\..+/.test(l.email)||(n.email.push("Please enter a valid email"),d=!1):(n.email.push("Email is required"),d=!1),l.phone?P.test(l.phone)||(n.phone.push("Enter a valid Egyptian phone number"),d=!1):(n.phone.push("Phone number is required"),d=!1),l.address||(n.address.push("Address is required"),d=!1),d},W=()=>{u.value===1&&K()&&(u.value=2)},X=()=>{u.value>1&&u.value--},Z=async()=>{V.value=!0;try{await new Promise(d=>setTimeout(d,2e3)),O.value="ORD-"+Date.now().toString().slice(-6),w.value.forEach(d=>{N.dispatch("removeFromCart",d.id)}),k.value=!0}catch{D("Order failed. Please try again.","error")}finally{V.value=!1}},G=()=>{k.value=!1,z.push("/")},D=(d,e)=>{m.message=d,m.color=e,m.show=!0};return te(()=>{w.value.length===0&&(D("Your cart is empty. Redirecting to products...","warning"),setTimeout(()=>{z.push("/products")},2e3))}),(d,e)=>(p(),g("div",fe,[s(le,{class:"checkout-container"},{default:t(()=>[s(x,{justify:"center",class:"mb-6"},{default:t(()=>[s(y,{cols:"12"},{default:t(()=>e[9]||(e[9]=[a("div",{class:"checkout-header"},[a("h1",{class:"header-title"},[r(" complete your order to get"),a("br"),r(" your iTag products "),a("span",{class:"highlight"},"NOW!")])],-1)])),_:1,__:[9]})]),_:1}),s(x,{justify:"center",class:ie({"mobile-reverse":d.$vuetify.display.smAndDown})},{default:t(()=>[s(y,{cols:"12",lg:"8",xl:"7"},{default:t(()=>[s(q,{class:"checkout-form-card",elevation:"0"},{default:t(()=>[s(F,{class:"pb-0"},{default:t(()=>[s(de,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),class:"checkout-stepper",elevation:"0","hide-actions":""},{default:t(()=>[s(ne,null,{default:t(()=>[s(I,{complete:u.value>1,color:u.value>=1?"primary":"grey",title:"Shipping Info",value:"1"},null,8,["complete","color"]),s(T),s(I,{complete:u.value>2,color:u.value>=2?"primary":"grey",title:"Review Order",value:"2"},null,8,["complete","color"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(F,{class:"checkout-content"},{default:t(()=>[u.value===1?(p(),g("div",ve,[e[12]||(e[12]=a("h2",{class:"step-title"},"Shipping Information",-1)),s(ue,{onSubmit:me(W,["prevent"]),ref_key:"shippingForm",ref:Q},{default:t(()=>[s(x,null,{default:t(()=>[s(y,{cols:"12",md:"6"},{default:t(()=>[a("div",ge,[s(_,{modelValue:l.firstName,"onUpdate:modelValue":e[1]||(e[1]=o=>l.firstName=o),placeholder:"First Name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"checkout-input","error-messages":n.firstName,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])])]),_:1}),s(y,{cols:"12",md:"6"},{default:t(()=>[a("div",ye,[s(_,{modelValue:l.lastName,"onUpdate:modelValue":e[2]||(e[2]=o=>l.lastName=o),placeholder:"Last Name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"checkout-input","error-messages":n.lastName,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])])]),_:1})]),_:1}),a("div",_e,[s(_,{modelValue:l.email,"onUpdate:modelValue":e[3]||(e[3]=o=>l.email=o),type:"email",placeholder:"Email Address",variant:"outlined","prepend-inner-icon":"mdi-email-outline",class:"checkout-input","error-messages":n.email,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",he,[s(_,{modelValue:l.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>l.phone=o),placeholder:"Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone-outline",class:"checkout-input","error-messages":n.phone,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",Ve,[s(_,{modelValue:l.address,"onUpdate:modelValue":e[5]||(e[5]=o=>l.address=o),placeholder:"Address",variant:"outlined","prepend-inner-icon":"mdi-map-marker-outline",class:"checkout-input","error-messages":n.address,"hide-details":"auto",required:""},null,8,["modelValue","error-messages"])]),a("div",ke,[s(h,{type:"submit",class:"checkout-btn primary-btn",size:"large",loading:V.value},{default:t(()=>[e[11]||(e[11]=r(" Review Order ")),s(c,{right:""},{default:t(()=>e[10]||(e[10]=[r("mdi-arrow-right")])),_:1,__:[10]})]),_:1,__:[11]},8,["loading"])])]),_:1},512)])):R("",!0),u.value===2?(p(),g("div",we,[e[26]||(e[26]=a("h2",{class:"step-title"},"Review Your Order",-1)),a("div",be,[e[13]||(e[13]=a("h3",{class:"review-section-title"},"Order Summary",-1)),s(L,{class:"order-items"},{default:t(()=>[(p(!0),g(U,null,A(w.value,o=>(p(),E(B,{key:o.id,class:"order-item"},{prepend:t(()=>[s(M,{size:"60",rounded:"lg"},{default:t(()=>[s(H,{src:`https://picsum.photos/60/60?random=${o.id}`},null,8,["src"])]),_:2},1024)]),append:t(()=>[a("div",Ne," $"+i((o.price*o.quantity).toFixed(2)),1)]),default:t(()=>[s(Y,{class:"item-name"},{default:t(()=>[r(i(o.name),1)]),_:2},1024),s(j,{class:"item-details"},{default:t(()=>[r(" Quantity: "+i(o.quantity)+" Ã— $"+i(o.price),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a("div",Se,[e[17]||(e[17]=a("h3",{class:"review-section-title"},"Shipping Address",-1)),a("div",Ce,[a("p",xe,[r(i(l.firstName)+" "+i(l.lastName),1),e[14]||(e[14]=a("br",null,null,-1)),r(" "+i(l.address),1),e[15]||(e[15]=a("br",null,null,-1)),r(" "+i(l.city)+", "+i(l.state)+" "+i(l.zipCode),1),e[16]||(e[16]=a("br",null,null,-1)),r(" "+i(l.phone),1)])])]),a("div",qe,[e[21]||(e[21]=a("h3",{class:"review-section-title"},"Payment Method",-1)),a("div",Fe,[a("div",Te,[s(c,{left:"",color:"success"},{default:t(()=>e[18]||(e[18]=[r("mdi-cash")])),_:1,__:[18]}),e[19]||(e[19]=a("span",{class:"card-info"}," Cash on Delivery (COD) ",-1))]),e[20]||(e[20]=a("p",{class:"cod-description"}," You will pay when your order is delivered to your address. ",-1))])]),a("div",ze,[s(h,{variant:"outlined",class:"checkout-btn secondary-btn",size:"large",onClick:X},{default:t(()=>[s(c,{left:""},{default:t(()=>e[22]||(e[22]=[r("mdi-arrow-left")])),_:1,__:[22]}),e[23]||(e[23]=r(" Back "))]),_:1,__:[23]}),s(h,{class:"checkout-btn primary-btn",size:"large",loading:V.value,onClick:Z},{default:t(()=>[s(c,{left:""},{default:t(()=>e[24]||(e[24]=[r("mdi-check")])),_:1,__:[24]}),e[25]||(e[25]=r(" Place Order "))]),_:1,__:[25]},8,["loading"])])])):R("",!0)]),_:1})]),_:1})]),_:1}),s(y,{cols:"12",lg:"4",xl:"4"},{default:t(()=>[s(q,{class:"order-summary-card",elevation:"0"},{default:t(()=>[s(pe,{class:"summary-header"},{default:t(()=>[s(c,{left:""},{default:t(()=>e[27]||(e[27]=[r("mdi-receipt")])),_:1,__:[27]}),e[28]||(e[28]=r(" Order Summary "))]),_:1,__:[28]}),s(F,{class:"summary-content"},{default:t(()=>[s(L,{class:"summary-items"},{default:t(()=>[(p(!0),g(U,null,A(w.value,o=>(p(),E(B,{key:o.id,class:"summary-item"},{prepend:t(()=>[s(M,{size:"40",rounded:"lg"},{default:t(()=>[s(H,{src:`https://picsum.photos/40/40?random=${o.id}`},null,8,["src"])]),_:2},1024)]),append:t(()=>[a("div",Oe," $"+i((o.price*o.quantity).toFixed(2)),1)]),default:t(()=>[s(Y,{class:"summary-item-name"},{default:t(()=>[r(i(o.name),1)]),_:2},1024),s(j,{class:"summary-item-qty"},{default:t(()=>[r(" Qty: "+i(o.quantity),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(T,{class:"my-4"}),a("div",$e,[a("div",Pe,[e[29]||(e[29]=a("span",null,"Subtotal:",-1)),a("span",null,"$"+i(b.value.toFixed(2)),1)]),a("div",De,[e[30]||(e[30]=a("span",null,"Shipping:",-1)),a("span",null,i(S.value===0?"Free":"$"+S.value.toFixed(2)),1)]),a("div",Ie,[e[31]||(e[31]=a("span",null,"Tax:",-1)),a("span",null,"$"+i($.value.toFixed(2)),1)]),s(T,{class:"my-2"}),a("div",Re,[e[32]||(e[32]=a("span",{class:"total-label"},"Total:",-1)),a("span",Le,"$"+i(J.value.toFixed(2)),1)])]),a("div",Ue,[s(c,{left:"",color:"success",size:"small"},{default:t(()=>e[33]||(e[33]=[r("mdi-truck-delivery")])),_:1,__:[33]}),e[34]||(e[34]=a("span",{class:"security-text"},"Safe and secure cash on delivery",-1))])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}),s(oe,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=o=>k.value=o),persistent:"","max-width":"500"},{default:t(()=>[s(q,{class:"success-dialog"},{default:t(()=>[a("div",Ae,[s(c,{size:"64",color:"success"},{default:t(()=>e[35]||(e[35]=[r("mdi-check-circle")])),_:1,__:[35]}),e[36]||(e[36]=a("h2",{class:"success-title"},"Order Placed Successfully!",-1)),a("p",Ee," Thank you for your purchase. Your order #"+i(O.value)+" is being processed. ",1)]),s(ce,{class:"success-actions"},{default:t(()=>[s(h,{color:"primary",variant:"flat",onClick:G,block:"",size:"large"},{default:t(()=>e[37]||(e[37]=[r(" Continue Shopping ")])),_:1,__:[37]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(re,{modelValue:m.show,"onUpdate:modelValue":e[8]||(e[8]=o=>m.show=o),color:m.color,location:"top",timeout:"4000"},{actions:t(()=>[s(h,{variant:"text",onClick:e[7]||(e[7]=o=>m.show=!1)},{default:t(()=>e[38]||(e[38]=[r(" Close ")])),_:1,__:[38]})]),default:t(()=>[r(i(m.message)+" ",1)]),_:1},8,["modelValue","color"])]))}},Me=ee(Be,[["__scopeId","data-v-37a35537"]]);export{Me as default};
