import{_ as ee,r as c,Q as k,c as v,o as se,R as te,a as F,d as a,w as o,V as re,e as ae,u as oe,f as ne,H as le,g as L,k as A,m as E,b as r,n as ie,K as de,L as ue,x as C,M as f,D as me,p as y,i as P,j as i,t as w,T as ce,v as Z,S as U}from"./index-yeX-kZv_.js";import{g as S}from"./googleAuthService-BFnKmHPd.js";const pe={class:"auth-page"},fe={class:"form-group"},we={class:"form-group"},ge={class:"form-group"},he={class:"form-group"},ve={key:0,class:"password-requirements"},ye={class:"form-group"},Pe={class:"form-group terms-group"},be={class:"terms-text"},Ne={class:"auth-divider"},Ve={class:"auth-switch"},ke={class:"switch-text"},Ae={__name:"Signup",setup(Ee){const b=oe(),x=ne(),R=c(null),g=c(!1),h=c(!1),u=c(!1),p=c(!1),N=c(!1),e=k({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),n=k({firstName:[],lastName:[],email:[],password:[],confirmPassword:[]}),d=k({show:!1,message:"",color:"success"}),z=[s=>!!s||"Name is required",s=>s&&s.length>=2||"Name must be at least 2 characters",s=>/^[a-zA-Z\s]*$/.test(s)||"Name can only contain letters and spaces"],G=[s=>!!s||"Email is required",s=>/.+@.+\..+/.test(s)||"Email must be valid"],$=[s=>!!s||"Password is required",s=>s&&s.length>=8||"Password must be at least 8 characters",s=>/[A-Z]/.test(s)||"Password must contain at least one uppercase letter",s=>/[a-z]/.test(s)||"Password must contain at least one lowercase letter",s=>/[0-9]/.test(s)||"Password must contain at least one number"],I=[s=>!!s||"Please confirm your password",s=>s===e.password||"Passwords do not match"],j=v(()=>e.firstName&&e.lastName&&e.email&&e.password&&e.confirmPassword&&e.password===e.confirmPassword&&/.+@.+\..+/.test(e.email)&&e.password.length>=8&&/[A-Z]/.test(e.password)&&/[a-z]/.test(e.password)&&/[0-9]/.test(e.password)&&u.value),_=v(()=>{if(!e.password)return 0;let s=0;return e.password.length>=8&&s++,/[A-Z]/.test(e.password)&&s++,/[a-z]/.test(e.password)&&s++,/[0-9]/.test(e.password)&&s++,s}),O=v(()=>{const s=_.value;return s===0?"":s===1?"Weak":s===2?"Fair":s===3?"Good":"Strong"});v(()=>{const s=_.value;return s<=1?"error":s===2?"warning":s===3?"info":"success"});const B=()=>(Object.keys(n).forEach(s=>{n[s]=[]}),e.firstName?e.firstName.length<2?n.firstName.push("First name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(e.firstName)||n.firstName.push("First name can only contain letters and spaces"):n.firstName.push("First name is required"),e.lastName?e.lastName.length<2?n.lastName.push("Last name must be at least 2 characters"):/^[a-zA-Z\s]*$/.test(e.lastName)||n.lastName.push("Last name can only contain letters and spaces"):n.lastName.push("Last name is required"),e.email?/.+@.+\..+/.test(e.email)||n.email.push("Email must be valid"):n.email.push("Email is required"),e.password?(e.password.length<8&&n.password.push("Password must be at least 8 characters"),/[A-Z]/.test(e.password)||n.password.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e.password)||n.password.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e.password)||n.password.push("Password must contain at least one number")):n.password.push("Password is required"),e.confirmPassword?e.confirmPassword!==e.password&&n.confirmPassword.push("Passwords do not match"):n.confirmPassword.push("Please confirm your password"),Object.values(n).every(s=>s.length===0)),W=()=>{if(!e.firstName)return[];const s=[];return e.firstName.length<2&&s.push("First name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(e.firstName)||s.push("First name can only contain letters and spaces"),s},D=()=>{if(!e.lastName)return[];const s=[];return e.lastName.length<2&&s.push("Last name must be at least 2 characters"),/^[a-zA-Z\s]*$/.test(e.lastName)||s.push("Last name can only contain letters and spaces"),s},H=()=>{if(!e.email)return[];const s=[];return/.+@.+\..+/.test(e.email)||s.push("Please enter a valid email address"),s},M=()=>{if(!e.password)return[];const s=[];return e.password.length<8&&s.push("Password must be at least 8 characters"),/[A-Z]/.test(e.password)||s.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e.password)||s.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e.password)||s.push("Password must contain at least one number"),s},K=()=>{if(!e.confirmPassword)return[];const s=[];return e.confirmPassword!==e.password&&s.push("Passwords do not match"),s},Q=()=>e.password?`Password strength: ${O.value}`:"Create a strong password with uppercase, lowercase, number and 8+ characters",Y=()=>e.confirmPassword?e.confirmPassword===e.password?"Passwords match!":"Passwords do not match":"Re-enter your password to confirm",J=()=>N.value&&!u.value?["You must agree to the terms and conditions"]:[],X=async()=>{if(N.value=!0,!B()||!u.value){u.value||m("Please agree to the terms and conditions","error");return}p.value=!0;try{const s={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,phone:"",preferences:{notifications:!0,theme:b.state.theme}};await b.dispatch("signup",s),m("Account created successfully! Welcome to iTag.","success"),setTimeout(()=>{x.push({name:"Profile"})},2e3)}catch(s){console.error("Signup error:",s),m("Signup failed. Please try again.","error")}finally{p.value=!1}},m=(s,t)=>{d.message=s,d.color=t,d.show=!0},q=async s=>{p.value=!0;try{const{userInfo:t}=s.detail,V=S.convertToAppUser(t);await b.dispatch("googleSignup",V),m("Account created successfully with Google! Welcome to iTag.","success"),setTimeout(()=>{x.push({name:"Profile"})},2e3)}catch(t){console.error("Google signup error:",t),m("Google signup failed. Please try again.","error")}finally{p.value=!1}},T=s=>{console.error("Google auth error:",s.detail),m("Google authentication failed. Please try again.","error")};return se(async()=>{try{await S.init(),window.addEventListener("googleAuthSuccess",q),window.addEventListener("googleAuthError",T),setTimeout(()=>{document.getElementById("google-signin-button")&&S.renderSignInButton("google-signin-button",{type:"standard",theme:"outline",size:"large",text:"signup_with",shape:"rectangular",width:"100%"})},100)}catch(s){console.error("Failed to initialize Google Auth:",s)}}),te(()=>{window.removeEventListener("googleAuthSuccess",q),window.removeEventListener("googleAuthError",T)}),(s,t)=>{const V=le("router-link");return L(),F("div",pe,[a(re,{class:"auth-container"},{default:o(()=>[a(A,{justify:"center",class:"header-row"},{default:o(()=>[a(E,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[12]||(t[12]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},"it's time to be smart")])],-1)])),_:1,__:[12]})]),_:1}),a(A,{justify:"center",align:"center"},{default:o(()=>[a(E,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3"},{default:o(()=>[a(ie,{class:"auth-card",elevation:"0"},{default:o(()=>[a(de,{class:"auth-content"},{default:o(()=>[a(ue,{onSubmit:C(X,["prevent"]),ref_key:"signupForm",ref:R},{default:o(()=>[r("div",fe,[a(f,{modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.firstName=l),label:"First Name",placeholder:"Enter your first name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":W(),rules:z,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",we,[a(f,{modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=l=>e.lastName=l),label:"Last Name",placeholder:"Enter your last name",variant:"outlined","prepend-inner-icon":"mdi-account-outline",class:"auth-input","error-messages":D(),rules:z,"validate-on":"blur",hint:"At least 2 characters, letters only","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",ge,[a(f,{modelValue:e.email,"onUpdate:modelValue":t[2]||(t[2]=l=>e.email=l),type:"email",label:"Email Address",placeholder:"Enter your email address",variant:"outlined","prepend-inner-icon":"mdi-email-outline",class:"auth-input","error-messages":H(),rules:G,"validate-on":"blur",hint:"We'll use this to send you important updates","persistent-hint":"",required:""},null,8,["modelValue","error-messages"])]),r("div",he,[a(f,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=l=>e.password=l),type:g.value?"text":"password",label:"Password",placeholder:"Create a strong password",variant:"outlined","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":g.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[4]||(t[4]=l=>g.value=!g.value),class:"auth-input","error-messages":M(),rules:$,"validate-on":"input",hint:Q(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"]),e.password?(L(),F("div",ve,[r("div",{class:y(["requirement-item",{met:e.password.length>=8}])},[a(P,{size:"small",color:e.password.length>=8?"success":"grey"},{default:o(()=>[i(w(e.password.length>=8?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[13]||(t[13]=r("span",null,"At least 8 characters",-1))],2),r("div",{class:y(["requirement-item",{met:/[A-Z]/.test(e.password)}])},[a(P,{size:"small",color:/[A-Z]/.test(e.password)?"success":"grey"},{default:o(()=>[i(w(/[A-Z]/.test(e.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[14]||(t[14]=r("span",null,"One uppercase letter",-1))],2),r("div",{class:y(["requirement-item",{met:/[a-z]/.test(e.password)}])},[a(P,{size:"small",color:/[a-z]/.test(e.password)?"success":"grey"},{default:o(()=>[i(w(/[a-z]/.test(e.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[15]||(t[15]=r("span",null,"One lowercase letter",-1))],2),r("div",{class:y(["requirement-item",{met:/[0-9]/.test(e.password)}])},[a(P,{size:"small",color:/[0-9]/.test(e.password)?"success":"grey"},{default:o(()=>[i(w(/[0-9]/.test(e.password)?"mdi-check-circle":"mdi-circle-outline"),1)]),_:1},8,["color"]),t[16]||(t[16]=r("span",null,"One number",-1))],2)])):me("",!0)]),r("div",ye,[a(f,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=l=>e.confirmPassword=l),type:h.value?"text":"password",label:"Confirm Password",placeholder:"Re-enter your password",variant:"outlined","prepend-inner-icon":"mdi-lock-check-outline","append-inner-icon":h.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[6]||(t[6]=l=>h.value=!h.value),class:"auth-input","error-messages":K(),rules:I,"validate-on":"blur",hint:Y(),"persistent-hint":"",required:""},null,8,["modelValue","type","append-inner-icon","error-messages","hint"])]),r("div",Pe,[a(ce,{modelValue:u.value,"onUpdate:modelValue":t[9]||(t[9]=l=>u.value=l),color:"primary",class:"terms-checkbox",error:!u.value&&N.value,"error-messages":J()},{label:o(()=>[r("span",be,[t[17]||(t[17]=i(" I agree to the ")),r("a",{href:"#",class:"terms-link",onClick:t[7]||(t[7]=C(()=>{},["prevent"]))},"Terms of Service"),t[18]||(t[18]=i(" and ")),r("a",{href:"#",class:"terms-link",onClick:t[8]||(t[8]=C(()=>{},["prevent"]))},"Privacy Policy")])]),_:1},8,["modelValue","error","error-messages"])]),a(Z,{type:"submit",block:"",class:"signup-btn",loading:p.value,disabled:!j.value,size:"large"},{default:o(()=>t[19]||(t[19]=[i(" CREATE ACCOUNT ")])),_:1,__:[19]},8,["loading","disabled"])]),_:1},512)]),_:1})]),_:1}),r("div",Ne,[a(U,{class:"divider-line"}),t[20]||(t[20]=r("span",{class:"divider-text"},"or Sign Up With ",-1)),a(U,{class:"divider-line"})]),t[23]||(t[23]=r("div",{class:"google-auth-section"},[r("div",{id:"google-signin-button",class:"google-signin-container"})],-1)),r("div",Ve,[r("p",ke,[t[22]||(t[22]=i(" Already have an account? ")),a(V,{to:"/login",class:"auth-link"},{default:o(()=>t[21]||(t[21]=[i(" Login ")])),_:1,__:[21]})])])]),_:1,__:[23]})]),_:1}),a(A,{justify:"center",class:"header-row"},{default:o(()=>[a(E,{cols:"12",md:"10",lg:"8",class:"text-center"},{default:o(()=>t[24]||(t[24]=[r("div",{class:"auth-header"},[r("div",{class:"hero-content text-center"},[r("h1",{class:"header-title"},[i(" it's easy to customize your profile."),r("br"),i(" join itag to be smart "),r("span",{class:"highlight"},"NOW!")])])],-1)])),_:1,__:[24]})]),_:1})]),_:1}),a(ae,{modelValue:d.show,"onUpdate:modelValue":t[11]||(t[11]=l=>d.show=l),color:d.color,location:"top",timeout:"4000"},{actions:o(()=>[a(Z,{variant:"text",onClick:t[10]||(t[10]=l=>d.show=!1)},{default:o(()=>t[25]||(t[25]=[i(" Close ")])),_:1,__:[25]})]),default:o(()=>[i(w(d.message)+" ",1)]),_:1},8,["modelValue","color"])])}}},xe=ee(Ae,[["__scopeId","data-v-1f8edeeb"]]);export{xe as default};
